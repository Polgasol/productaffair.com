(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[143],{62841:function(e,r,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/verify",function(){return t(79847)}])},79847:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return J}});var n=t(85893),i=t(67294),a=t(19488),o=t.n(a),s=function(){return(0,n.jsxs)("div",{className:o()["verify-page-con"],children:[(0,n.jsx)("div",{className:o()["verify-title-con"],children:(0,n.jsx)("span",{className:o()["verify-title-text"],children:"Verify Email"})}),(0,n.jsx)("div",{className:o()["code-title-con"],children:(0,n.jsx)("span",{className:o()["code-title-text"],children:"Enter verification code sent to your e-mail"})})]})},c=t(11163),d=t(87536),u=t(74231),l=t(95496),f=t(15568),v=t(41508),m=t.n(v),p=t(31812),y=t(83321),x=t(57090),_=t.n(x),h=function(e){var r=e.isLoading;return(0,n.jsx)("div",{className:_()["enter-btn-div"],children:r?(0,n.jsx)(p.Z,{loading:!0,type:"submit",variant:"contained",size:"small",sx:{fontSize:"typography.fontSize"},children:"Verify"}):(0,n.jsx)(y.Z,{type:"submit",variant:"contained",size:"small",sx:{fontSize:"typography.fontSize"},children:"Verify"})})},j=t(4215),g=t(3471),b=t(34051),w=t.n(b),C=t(9669),V=t.n(C);function N(e,r,t,n,i,a,o){try{var s=e[a](o),c=s.value}catch(d){return void t(d)}s.done?r(c):Promise.resolve(c).then(n,i)}function S(e){return function(){var r=this,t=arguments;return new Promise((function(n,i){var a=e.apply(r,t);function o(e){N(a,n,i,o,s,"next",e)}function s(e){N(a,n,i,o,s,"throw",e)}o(void 0)}))}}var E=function(){var e=S(w().mark((function e(){var r,t;return w().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.next=5;break;case 3:return r=e.sent,e.abrupt("return",r.data.data);case 5:return e.next=7,V().get("https://api.productaffair.com/api/verify");case 7:return t=e.sent,e.abrupt("return",t.data.data);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),k=(function(){var e=S(w().mark((function e(){var r,t;return w().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.next=5;break;case 3:return r=e.sent,e.abrupt("return",r.data.data);case 5:return e.next=7,V().get("https://api.productaffair.com/api/verify/resend");case 7:return t=e.sent,e.abrupt("return",t.data.data);case 9:case"end":return e.stop()}}),e)})))}(),function(){var e=S(w().mark((function e(r){var t,n;return w().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.next=5;break;case 3:return t=e.sent,e.abrupt("return",t.data.data);case 5:return e.next=7,V().post("https://api.productaffair.com/api/verify",r,{withCredentials:!0});case 7:return n=e.sent,e.abrupt("return",n.data.data);case 9:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}()),P=function(e){var r,t,i,a,o,s,c,d=e.errors;return(0,n.jsxs)("div",{children:[null===(r=d.firstname)||void 0===r?void 0:r.message,(0,n.jsx)("br",{}),null===(t=d.lastname)||void 0===t?void 0:t.message,(0,n.jsx)("br",{}),null===(i=d.email)||void 0===i?void 0:i.message,(0,n.jsx)("br",{}),null===(a=d.age)||void 0===a?void 0:a.message,(0,n.jsx)("br",{}),null===(o=d.username)||void 0===o?void 0:o.message,(0,n.jsx)("br",{}),null===(s=d.createPassword)||void 0===s?void 0:s.message,(0,n.jsx)("br",{}),null===(c=d.confirmPassword)||void 0===c?void 0:c.message,(0,n.jsx)("br",{})]})};function O(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function F(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{},n=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),n.forEach((function(r){O(e,r,t[r])}))}return e}var T=u.Ry().shape({verificationCode:u.Z_().min(1).max(8,"You have reached maximum number of characters").required().typeError("Please enter a valid code")}).defined(),Z=function(){var e=(0,c.useRouter)(),r=(0,d.cI)({resolver:(0,l.X)(T)}),t=r.register,a=r.handleSubmit,o=r.clearErrors,s=r.formState.errors,u=(0,i.useState)(!1),v=u[0],p=u[1],y=(0,g.useQueryClient)(),x=(0,g.useMutation)({mutationFn:function(e){return k(e)},onSuccess:function(){y.invalidateQueries({queryKey:["auth"]})}}),_=x.mutate,b=x.data,w=x.reset,C=x.isLoading,V=x.isError,N=x.isSuccess,S=a((function(e){_(e)}),(function(e){return p(!0)}));return N&&(!0===b.auth.verified&&"local"===b.auth.type&&e.push("/"),e.push("/login")),(0,n.jsxs)("form",{className:m()["verify-code-form"],onSubmit:S,children:[(0,n.jsxs)("div",{className:m()["verify-input-con"],children:[(0,n.jsx)("input",F({className:m()["verify-input"],type:"text"},t("verificationCode"),{onChange:function(e){w(),o("verificationCode"),p(!1)},autoComplete:"off",placeholder:"Enter verification code"})),(0,n.jsx)("div",{className:m()["enter-btn-div"],children:(0,n.jsx)(h,{post:C})})]}),(0,n.jsx)("div",{children:(0,n.jsxs)("div",{className:m()["verify-error-con"],children:[V&&!v?(0,n.jsx)(f.Z,{severity:"error",children:(0,n.jsx)(j.Z,{children:"Something went wrong."})}):(0,n.jsx)("div",{}),v?(0,n.jsx)(f.Z,{severity:"error",children:(0,n.jsx)(j.Z,{children:"Sorry, there was a problem with your request."})}):(0,n.jsx)("div",{}),s?(0,n.jsx)(P,{errors:s}):(0,n.jsx)("div",{})]})})]})},L=t(79235),q=t.n(L),z=function(){return(0,n.jsxs)("div",{className:q()["verify-div"],children:[(0,n.jsx)(s,{}),(0,n.jsx)("div",{className:q()["verify-input-div"],children:(0,n.jsx)(Z,{})})]})},W=t(98456),R=t(9008),X=t.n(R),G=t(4298),I=t.n(G),A=function(){var e,r,t=(0,c.useRouter)(),i=(0,g.useQuery)(["getVerify"],E),a=i.data,o=i.isLoading,s=i.isError,d=null===a||void 0===a||null===(e=a.auth)||void 0===e?void 0:e.verified,u=null===a||void 0===a||null===(r=a.auth)||void 0===r?void 0:r.type;return o?(0,n.jsx)("div",{className:q()["loading-container"],children:(0,n.jsx)(W.Z,{})}):s?(0,n.jsx)("div",{children:"There was a problem..."}):("local"!==u&&!1!==d&&t.push("/"),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(X(),{children:[(0,n.jsx)("meta",{name:"description",content:""}),(0,n.jsx)("meta",{content:"width=device-width,maximum-scale=1.0,initial-scale=1.0,minimum-scale=0.9,user-scalable=no",name:"viewport"}),(0,n.jsx)("meta",{name:"format-detection",content:"telephone=no"}),(0,n.jsx)("meta",{name:"google",content:"notranslate"}),(0,n.jsx)("meta",{name:"application-name",content:"Productaffair"}),(0,n.jsx)("meta",{property:"og:site_name",content:"Productaffair"}),(0,n.jsx)("meta",{property:"og:locale",content:"en_US"})]}),(0,n.jsx)(I(),{src:"https://www.googletagmanager.com/gtag/js?id=G-2FJZ116LFW",strategy:"afterInteractive"}),(0,n.jsx)(I(),{id:"google-analytics",strategy:"afterInteractive",children:"window.dataLayer = window.dataLayer || [];\n  function gtag(){dataLayer.push(arguments);}\n  gtag('js', new Date());\n\n  gtag('config', 'G-2FJZ116LFW');"})]}),(0,n.jsx)("main",{className:q()["verify-code-main"],children:(0,n.jsx)(z,{})})]}))},J=function(){return(0,n.jsx)(A,{})}},79235:function(e){e.exports={"verify-resend-con":"VerifyCode_verify-resend-con__vSrTg","resend-code-link":"VerifyCode_resend-code-link__aGx8H","new-code-div":"VerifyCode_new-code-div__vVXa1","enter-btn-div":"VerifyCode_enter-btn-div__RWt6I","enter-btn":"VerifyCode_enter-btn__ifCL6","verify-code-main":"VerifyCode_verify-code-main__nMfW5","verify-div":"VerifyCode_verify-div__Jme_S","verify-input-div":"VerifyCode_verify-input-div__O08qs"}},57090:function(e){e.exports={"enter-btn-div":"EnterBtn_enter-btn-div__2iTpA","enter-btn":"EnterBtn_enter-btn___49Am"}},41508:function(e){e.exports={"verify-input":"VerifyCodeField_verify-input__lFW0w","verify-input-con":"VerifyCodeField_verify-input-con__GHq_t","verify-error-con":"VerifyCodeField_verify-error-con__bbwYx"}},19488:function(e){e.exports={"verify-page-con":"VerifyTitle_verify-page-con__UM7gT","verify-title-text":"VerifyTitle_verify-title-text__1x0Re","verify-title-con":"VerifyTitle_verify-title-con__2_OSq","code-title-text":"VerifyTitle_code-title-text__ntXwA","code-title-con":"VerifyTitle_code-title-con__Wvu3K"}}},function(e){e.O(0,[796,611,774,888,179],(function(){return r=62841,e(e.s=r);var r}));var r=e.O();_N_E=r}]);